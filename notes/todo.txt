add rotation and flip state to game state
divide attacked and move functionality to own file
add tests